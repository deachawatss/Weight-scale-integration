# ═══════════════════════════════════════════════════════════════
# Bridge Service Environment Configuration Template
# ═══════════════════════════════════════════════════════════════
#
# WebSocket bridge service for weight scale communication
# Handles real-time weight data broadcasting to frontend clients
#
# Usage:
#   cp .env.example .env                    # Create local environment
#   cp .env.example .env.development       # Development environment
#   cp .env.example .env.staging          # Staging environment
#   cp .env.example .env.production       # Production environment
#
# ═══════════════════════════════════════════════════════════════

# ────────────────────────────────────────────────────────────────
# 🌍 Environment Settings
# ────────────────────────────────────────────────────────────────
DOTNET_ENVIRONMENT=Development
LOG_LEVEL=Debug

# ────────────────────────────────────────────────────────────────
# 🖥️ Service Configuration
# ────────────────────────────────────────────────────────────────
# Bridge Service Host and Port
SERVER_HOST=0.0.0.0
BRIDGE_SERVICE_PORT=5000

# Service Identification
COMPUTER_NAME=WS1

# ────────────────────────────────────────────────────────────────
# 🗄️ Database Configuration
# ────────────────────────────────────────────────────────────────
# Primary Database Connection (shared with backend)
SCALE_DB_SERVER=192.168.0.86
SCALE_DB_PORT=49381
SCALE_DB_NAME=TFCPILOT3
SCALE_DB_USERNAME=NSW
SCALE_DB_PASSWORD=B3sp0k3

# Alternative Database Variables (for compatibility)
DATABASE_SERVER=192.168.0.86
DATABASE_PORT=49381
DATABASE_NAME=TFCPILOT3
DATABASE_USERNAME=NSW
DATABASE_PASSWORD=B3sp0k3

# Database Connection String Template
# Will be built as: Server={server},{port};Database={name};User Id={user};Password={password};Encrypt=False;TrustServerCertificate=True
DATABASE_CONNECTION_STRING=

# ────────────────────────────────────────────────────────────────
# ⚖️ Weight Scale Configuration
# ────────────────────────────────────────────────────────────────
# Default Scale Settings
DEFAULT_SCALE_BAUD_RATE=9600
SCALE_DEFAULT_UNIT=KG

# Polling and Communication
WEIGHT_POLLING_INTERVAL_MS=50
SCALE_READ_TIMEOUT_MS=100

# Scale Mode Configuration
SCALE_CONTINUOUS_MODE=true

# ────────────────────────────────────────────────────────────────
# 🔌 Serial Port Configuration
# ────────────────────────────────────────────────────────────────
# Manual Scale Configuration (for manual scale setup)
SCALE_MANUAL_PORT=
SCALE_MANUAL_SCALE_ID=
SCALE_MANUAL_BAUD_RATE=9600
SCALE_MANUAL_DATA_BITS=8
SCALE_MANUAL_PARITY=None
SCALE_MANUAL_STOP_BITS=One
SCALE_MANUAL_NATIVE_PORT=

# Serial Port Access Control
SCALE_DISABLE_SERIAL=false
SCALE_ENABLE_WSL_SERIAL=false

# ────────────────────────────────────────────────────────────────
# 🌐 CORS Configuration
# ────────────────────────────────────────────────────────────────
# Allowed origins for WebSocket connections
CORS_ALLOWED_ORIGINS=http://localhost:6060,http://127.0.0.1:6060,http://192.168.0.11:6060

# ────────────────────────────────────────────────────────────────
# 🐛 Debugging & Logging
# ────────────────────────────────────────────────────────────────
# Verbose logging for troubleshooting
VERBOSE_LOGGING=false

# Console logging configuration
LOG_TO_STANDARD_ERROR_THRESHOLD=Debug

# ────────────────────────────────────────────────────────────────
# 🔧 WSL Configuration
# ────────────────────────────────────────────────────────────────
# Windows Subsystem for Linux specific settings
# These are automatically detected, but can be overridden
WSL_DISTRO_NAME=
WSL_ENABLE_SERIAL_AUTO_DETECT=true

# ────────────────────────────────────────────────────────────────
# 🏥 Health Check Configuration
# ────────────────────────────────────────────────────────────────
# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL_MS=30000

# ────────────────────────────────────────────────────────────────
# 📊 Performance Configuration
# ────────────────────────────────────────────────────────────────
# WebSocket Configuration
WEBSOCKET_KEEP_ALIVE_INTERVAL_MS=30000
WEBSOCKET_BUFFER_SIZE=4096
MAX_CONCURRENT_CONNECTIONS=100

# Scale Broadcasting Performance
BROADCAST_BATCH_SIZE=10
BROADCAST_INTERVAL_MS=10

# ────────────────────────────────────────────────────────────────
# 🔌 Integration Endpoints
# ────────────────────────────────────────────────────────────────
# WebSocket endpoints (automatically generated)
SMALL_SCALE_ENDPOINT=/ws/scale/small
BIG_SCALE_ENDPOINT=/ws/scale/big
LEGACY_SCALE_ENDPOINT=/ws/scale

# API endpoints
API_ROOT_ENDPOINT=/
API_HEALTH_ENDPOINT=/health
API_SCALES_ENDPOINT=/scales

# ────────────────────────────────────────────────────────────────
# 🚨 Production Overrides (for .env.production only)
# ────────────────────────────────────────────────────────────────
#
# COPY AND MODIFY THESE VALUES IN .env.production:
#
# DOTNET_ENVIRONMENT=Production
# LOG_LEVEL=Information
# VERBOSE_LOGGING=false
#
# # Tighter security for production
# CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
#
# # Performance optimizations for production
# WEIGHT_POLLING_INTERVAL_MS=25
# SCALE_READ_TIMEOUT_MS=50
#
# ═══════════════════════════════════════════════════════════════